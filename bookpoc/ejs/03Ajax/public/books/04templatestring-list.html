<!--  Attempt #3 (Template String) at trying to remove unnecessary fetch of in page template. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax Version</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
        th, td {
            padding: 5px;
        }
        a { cursor: pointer; color: blue; }
        a:hover,a.hover { text-decoration: underline; }
    </style>
</head>
<body>
<div id="display"></div>

<script   src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        loadBooks();
    });

    function loadBooks(){
        $.get('/api/books/', function(books) {
            document.getElementById('display').innerHTML = (listTpl(books));
        });

    }

    /*YUCK.  New way mixes html into javascript.  Ugly and difficult to maintain */
    function listTpl(books){
        return `
            <table>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Price</th>
                </tr>
                ${books.map(function(book){
            return `
                    <tr id='display${ book.id }'>
                        <td>${ book.id }</td>
                        <td><span>${ book.title }</span></td>
                        <td><span>${ book.author }</span></td>
                        <td>$<span>${ book.price }</span></td>
                    </tr>
                    `}).join('')
                }

            </table>

        `;

    }



</script>

</body>
</html>